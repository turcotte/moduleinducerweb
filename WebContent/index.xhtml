<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
	
	
<h:head>
	<title>Module Inducer</title>
	
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/nihilo/nihilo.css"/>
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css"/>
	
	<style> 
    <!--
		* { 
		    font-family: Verdana, Geneva, sans-serif; 
		    font-size: 9pt; 
		}
		
		.main {
			width: 700px;
		    margin: 25px 25px 25px 25px; 
		}
		
		.title{
			font-size: 13pt;
			font-weight:bold;
		}
		
		.header {
			background-color: white;
			padding: 10px;
			margin: 10px;
			border-style:solid; 
			border-width:2px; 
			border-color: #348017;  
			text-align: center; 
		}
		
		.mi_body {
			background-color: white;
			padding: 10px;
			margin: 10px;
			border-style:solid; 
			border-width:1px; 
			border-color: #348017; 
		}
		
		.mi_footer{
			background-color: white;
			padding: 10px;
			margin: 10px;
			border-style:solid; 
			border-width:1px; 
			border-color: #348017; 
			text-align: center;
		}
		
		.extra-help {
			text-align: right;
			align: right;
		}
		
		.data-entry-title {
			font-size: 11pt;
			font-weight:bold;
		}
		
		.data-entry-area {
			margin: 0px 0px 25px 35px;
			padding: 0;
		}
		
		.info-message {
			background-color: #C3FDB8;
			padding: 4px;
			text-align: left; 
			/*vertical-align: top;*/ 
		}
		
		.error-message {
			text-align: left; 
			background-color: #FFF380
		}
		
		.text-entry-area {
			width: 550px;
			padding: 0;
			margin: 0;
			font-size: 6pt;
		}
		
		.help-header-text{
			color:#FF9900;
			font-weight:bold;
		}
		
		.options-input-field {
			width: 50px;
			text-align: right;
		}
		
    -->
   </style>
   
	
	<!--  None of the below work, so had to include css in the page
	<style media="screen" type="text/css">
  		@import "#{facesContext.externalContext.request.contextPath}/css/mi_style.css"
	</style>
	<link href="${facesContext.externalContext.requestContextPath}/css/mi_style.css" rel="stylesheet" type="text/css"/>
	<link rel="stylesheet" type="text/css" href="${request.contextPath}/css/mi_style.css" />
	<link rel="stylesheet" type="text/css" href="mi_style.css" />
	<h:outputStylesheet library="css" name="/css/mi_style.css"  /> - placed in body
	-->
	
	<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojo/dojo.xd.js" data-dojo-config="parseOnLoad:true"></script>
	<script language="javascript">
    <!--
 		// Load the Tooltip widget class
   		dojo.require("dijit.Tooltip");
    	dojo.ready(function(){         
			//All code that manipulates the DOM must wait until the DOM is ready before it can be executed.
        });
    
    // If a specific value (expectedRadioValue) of a radiobutton (radioEL) is selected,
    // then display an element with a specified id (elementToDisplay).
    function radioToggle1(radioEL, expectedRadioValue, elementToDisplay) {
	    
    	var displayState;
    	
    	if (radioEL.value == expectedRadioValue){
    		//dojo.fadeIn({ node: elementToDisplay }).play();
    		displayState = 'block';
    	} else {
			//dojo.fadeOut({ node: elementToDisplay }).play();
    		displayState = 'none'; 
    	}
    	
   
        if (document.all) { //IS IE 4 or 5 (or 6 beta)
            eval( "document.all." + elementToDisplay + ".style.display = "+ displayState);
        }
   
        if (document.layers) { //IS NETSCAPE 4 or below
            document.layers[elementToDisplay].display = displayState;
        }
       
        if (document.getElementById && !document.all) {
            document.getElementById(elementToDisplay).style.display = displayState;

        }
        
    }
   
   
    //-->
    </script>     
    

</h:head>

<h:body styleClass="nihilo" style="background-color: #F8F8F8;">


<div class="main">

<f:view>

	<div class="header">
		<div class="title">ModuleInducer :: </div>
		:: Extract patterns from biological data.
	</div>
	<br/>

	
	<div class="mi_body">
		
	
	<div class="error-message">
	<h:messages />	
	</div>
	
	
	
	
	<h:panelGroup>
	
		
			
		<p class="info-message" style="display:none;"> This version of Module Inducer is a 
		demonstration system, therefore the number and length of the input sequences is restricted to 150 and 3000 nt 
		respectively. The number of regulatory elements is restricted to 15. If you have any question or would like to 
		run Module Inducer on a larger data set, please write to us: Module.Inducer@site.uOttawa.ca
		</p>
		
		<h:form id="customDataFormId" name="customDataForm">
		
		<div class="extra-help">
				<h:commandButton action="#{customDataBean.loadCelegansData}" styleClass="background-color: #348017" value=" Fill in example data "></h:commandButton>
				<h:commandButton action="#{customDataBean.clearData}" styleClass="background-color: #348017" value=" Clear "></h:commandButton>
		</div>	

		<h:panelGrid columns="1">
			<h:panelGroup>
				<h:outputLabel for="positiveSequencesTextArea" value="Experiment sequences: " styleClass="data-entry-title" ></h:outputLabel>
				<button id="help_ExperimentSeqBtn" onmouseover="dijit.Tooltip.defaultPosition=['after']" >
					<font class="help-header-text">?</font>
				</button>
				<div class="dijitHidden">
					<span data-dojo-type="dijit.Tooltip" data-dojo-props="connectId:'help_ExperimentSeqBtn'">
						<font class="help-header-text">Experiment sequences</font> <br/>
						<p>
						A set of related DNA sequences, which will be analyzed. <br/>
						For instance, regions surrounding a binding site of some <br/>
						transcription factor; samples taken from cancer patients.
						</p>
						Should be in the FASTA format	
					</span>
				</div>
			</h:panelGroup>
				
				<br/>
				<h:panelGroup>
				
				<div class="data-entry-area">
				 
				 	<h:inputTextarea id="positiveSequencesTextArea" value="#{customDataBean.posSequences}" styleClass="text-entry-area" rows="10" 
								 required="false" />
				 
				</div>
				</h:panelGroup>
			 
			<h:panelGroup>	
                <h:outputLabel value="Control sequences: " styleClass="data-entry-title" ></h:outputLabel>
				<button id="help_ControlSeqBtn" onmouseover="dijit.Tooltip.defaultPosition=['after']"><font class="help-header-text">?</font></button>
				<div class="dijitHidden">
					<span data-dojo-type="dijit.Tooltip" data-dojo-props="connectId:'help_ControlSeqBtn'">
						<font class="help-header-text">Control sequences</font> <br/>
						<p>
						A set of related DNA sequences, which contrast experiment sequences. <br/>
						For instance, regions surrounding a binding site of some transcription <br/>
						factor; samples taken from healthy patients.<br/>
						</p>
						Sequences can be either:<ul>
						<li>specified in Fasta format (recommended for best results); </li>
						<li>generated with the same nucleotide composition, as the experiment <br/>sequences;</li>
						<li>generated from experiment sequences using Markov chain model of <br/>
							order 1 (the probability of an occurrence of a nucleotide depends <br/>
							on one previously occurred nucleotide ). </li>
						</ul>
					</span>
				</div>
			</h:panelGroup>
				
			<br/>
			
			<h:panelGroup>    
			
				<div class="data-entry-area">
	                   <h:selectOneRadio id="negExRadioId" value="#{customDataBean.negExType}" onchange="radioToggle1(this, 'customNegEx', 'customNegExDiv');" >
	                       <f:selectItem itemValue="customNegEx" itemLabel="Custom    " />   
	                       <f:selectItem itemValue="mc0" itemLabel=" Same nucleotide composition   " />
	                       <f:selectItem itemValue="mc1" itemLabel=" Markov chain of order 1 " />
	                   </h:selectOneRadio>
	
					<div id="customNegExDiv" style="display: #{customDataBean.customNegExDivVisibility};" >
						<h:inputTextarea id="negativeSequencesTextArea" value="#{customDataBean.negSequences}" styleClass="text-entry-area" rows="10" 
										 required="false"   />	
					</div>
				</div>
			</h:panelGroup>
               
                
			<h:panelGroup>	
				<h:outputLabel value="Biological markers: " styleClass="data-entry-title"></h:outputLabel>
				<button id="help_BioMarkersBtn" onmouseover="dijit.Tooltip.defaultPosition=['after']"><font class="help-header-text">?</font></button>
				<div class="dijitHidden">
					<span data-dojo-type="dijit.Tooltip" data-dojo-props="connectId:'help_BioMarkersBtn'">
						<font class="help-header-text">Biological markers</font> <br/>
						<p>
						Transcription factor binding sites or any other over-represented motifs, <br/>
						found in experiment sequences.
						</p>
						Biological markers can be either:<ul>
						<li>discovered using DREME;</li>
						<li>supplied as PSSMs in a FASTA-like format (see example data for<br/>details).</li>
						</ul>
						
					</span>
				</div>
			</h:panelGroup>
				
			<h:panelGroup>
			<div class="data-entry-area">
				<h:selectOneRadio id="bioMarkersRadioId" value="#{customDataBean.bioMarkersType}" onchange="radioToggle1(this, 'customPSSMs', 'customPSSMsDiv');" >
					<f:selectItem itemValue="useDreme" itemLabel=" Find new using DREME  " />   
					<f:selectItem itemValue="customPSSMs" itemLabel=" Locate specified using PATSER " />
                </h:selectOneRadio>
                   		
				<div id="customPSSMsDiv" style="display: #{customDataBean.customPSSMsDivDivVisibility};">		
					<h:inputTextarea id="pwmSequencesTextArea" value="#{customDataBean.pwms}" styleClass="text-entry-area" rows="10" required="false" />
				</div>
				
			</div>
			</h:panelGroup>
			
			
			<h:panelGroup>	
				<h:outputLabel value="Advanced options: " styleClass="data-entry-title"></h:outputLabel>
			</h:panelGroup>
				
			<h:panelGroup>
			<div class="data-entry-area">
			
				<table border="0" width="100%">
					<tr>
						<td />
						<td align="right" width="200px" height="30px"><strong>Experiment sequences</strong></td>
						<td align="right" width="200px"><strong>Control sequences</strong></td>
					</tr>
					<tr>
						<td>PATSER cut-off score</td>
						<td align="right"> 
							<h:inputText label="PATSER cut-off score for experiment sequences" id="posPatserCutoff" value="#{customDataBean.posPatserCutoff}" styleClass="options-input-field" /> 
						</td>
						<td align="right"> 
							<h:inputText label="PATSER cut-off score for control sequences" id="negPatserCutoff" value="#{customDataBean.negPatserCutoff}" styleClass="options-input-field" /> 
						</td>
					</tr>
					<tr>
						<td>DREME cut-off score</td>
						<td align="right">
							<h:inputText label="DREME cut-off score for experiment sequences" id="posDremeCutoff" value="#{customDataBean.posDremeCutoff}" styleClass="options-input-field" />
						</td>
						<td align="right">
							<h:inputText label="DREME cut-off score for control sequences" id="negDremeCutoff" value="#{customDataBean.negDremeCutoff}" styleClass="options-input-field" />
						</td>
					</tr>
					<tr>
						<td>FIMO cut-off score</td>
						<td align="right">
							<h:inputText label="FIMO cut-off score for experiment sequences" id="posFimoCutoff" value="#{customDataBean.posFimoCutoff}" styleClass="options-input-field" />
						</td>
						<td align="right">
							<h:inputText label="FIMO cut-off score for control sequences" id="negFimoCutoff" value="#{customDataBean.negFimoCutoff}" styleClass="options-input-field" />
						</td>
					</tr>
					
				</table>
				
				
			</div>
			</h:panelGroup>
		
		</h:panelGrid>
			
		<br/>
		<h:commandButton action="#{customDataBean.induceTheory}" value=" Induce Theory >> "></h:commandButton>
		
		<br/><br/>
			
	
		</h:form>
		
		
	</h:panelGroup>

	
	</div>
	
</f:view>

	<div class="mi_footer">
		
				<strong>Questions and suggestions:</strong> <a href="mailto:module.inducer@site.uottawa.ca">module.inducer@site.uottawa.ca</a> <br/>
				<strong>Last updated:</strong> December 6, 2011
	
	</div>

</div>

</h:body>
</html>